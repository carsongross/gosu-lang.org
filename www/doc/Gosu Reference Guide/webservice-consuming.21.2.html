<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Learning Gosu XML APIs</title>
    <link rel="StyleSheet" href="css/webservice-consuming.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="webservice-consuming.21.1.html#2047933">Calling Web Services from Gosu</a> : <a class="WebWorks_Breadcrumb_Link" href="webservice-consuming.21.1.html#2047933">WS-I Web Service Overview</a> : Learning Gosu XML APIs</span></div>
    <hr align="left" />
    <div>
      <div class="H2B_-_Heading_2_Break"><a name="2047933">Learning Gosu XML APIs</a></div>
      <div class="B_-_Body"><a name="2047934">All WS-I method argument types and return types are defined from schemas (the XSD embedded in the WSDL). </a>From Gosu, all these objects are instances of subclasses of <span class="cv_-_computer_voice">XmlElement</span>, with the specific subclass defined by the schemas in the WSDL. From Gosu, working with WS-I web service data requires that you understand Gosu XML APIs. </div>
      <div class="B_-_Body"><a name="2047950">In many cases, Gosu hides much of the complexity of XML so you do not need to worry about it. For example, </a>for XSD-types, in Gosu you do not have to directly manipulate XML as bytes or text. Gosu handles common types like number, date, or Base64 binary data. You can directly get or set values (such as a <span class="cv_-_computer_voice">Date</span> object rather than a serialized <span class="cv_-_computer_voice">xsd:date</span> object). The <span class="cv_-_computer_voice">XmlElement</span> class, which represents an XML element hide much of the complexity.</div>
      <div class="B_-_Body"><a name="2048704">Other notable tips to working with XML in Gosu:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047899">When using a schema (an XSD, or a WSDL that references an XSD), Gosu exposes shortcuts for referring to </a>child elements using the name of the element. For more information, see <a href="javascript:WWHClickedPopup('gosu', 'xml.20.08.html#1539306', '');" title="XSD-based Properties and Types">"XSD-based Properties and Types"</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2043857">When setting properties in an XML document, Gosu creates intermediate XML element nodes in the graph </a>automatically. Use this feature to significantly improve the readability of your XML-related Gosu code. For details, see <a href="javascript:WWHClickedPopup('gosu', 'xml.20.13.html#1540977', '');" title="Automatic Creation of Intermediary Elements">"Automatic Creation of Intermediary Elements"</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2043823">For properties that represent child elements that can appear more than once, Gosu exposes that property as a </a>list. For list-based types like this, there is a special shortcut to be aware of. If you assign to the list index <span class="s_-_strong">equal to the size of the list</span>, then Gosu treats the index assignment as an insertion. This is also true if the size of the list is zero: use the <span class="cv_-_computer_voice">[0]</span> array/list index notation and set the property. This inserts the value into the list, which is equivalent to adding an element to the list. However, you do not have to worry about whether the list exists yet. If you are creating XML objects in Gosu, by default the lists do not yet exist. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2048741">In other words, use the syntax:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2048751">element.PropertyName[0] = childElement</a></div>
      <div class="LP_-_List_Para"><a name="2048759">If the list does</a>&nbsp;not&nbsp;exist yet for a list property at all, Gosu <span class="s_-_strong">creates</span> the list upon the first insertion. In other words, suppose an element contains child elements that represent an address and the child element has the name <span class="cv_-_computer_voice">Address</span>. If the XSD declares the element could exist more than once, the <span class="cv_-_computer_voice">element.Address</span> property is a list of addresses. The following code creates a new <span class="cv_-_computer_voice">Address</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="2048035">element.Address[0] = new my.package.xsdname.elements.Address()</a></div>
      <div class="B_-_Body"><a name="2048007">For more information, see the related topics:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('gosu', 'xml.20.08.html#1621424', '');" title="XSD-based Properties and Types" name="2048072">"Automatic Insertion into Lists"</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('gosu', 'xml.20.08.html#1539306', '');" title="XSD-based Properties and Types" name="2048082">"XSD-based Properties and Types"</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('gosu', 'xml.20.01.html#1470967', '');" title="Gosu and XML" name="2048096">"Gosu and XML"</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="2043632">What Gosu Creates from Your WSDL</a></div>
      <div class="B_-_Body"><a name="2043633">Within the namespace of the package of the WSDL, Gosu creates some new types.</a></div>
      <div class="B_-_Body"><a name="2013538">For each service in the web service, Gosu creates a service by name. For example, if the external service has a </a>service called <span class="cv_-_computer_voice">GeocodeService</span> and the WSDL is in the package <span class="cv_-_computer_voice">examples.gosu.wsi</span>, then the service has the fully-qualified type <span class="cv_-_computer_voice">examples.gosu.wsi.GeocodeService</span>. Create a new instance of this type, and you then you can call methods on it for each method.</div>
      <div class="B_-_Body"><a name="2013532">For each operation in the web service, generally speaking Gosu creates two local methods:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2013379">one method with the method name in its natural form, for example suppose a method is called </a><span class="cv_-_computer_voice">doAction</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2013391">one method with the method name with the </a><span class="cv_-_computer_voice">async_</span> prefix, for example <span class="cv_-_computer_voice">async_doAction</span>. This version of the method handles asynchronous API calls. For details, see <a href="javascript:WWHClickedPopup('gosu', 'webservice-consuming.21.5.html#2003179', '');" title="Asynchronous Methods">"Asynchronous Methods"</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3"><a name="2047863">Special Behavior For Multiple Ports</a></div>
      <div class="B_-_Body"><a name="2047864">Gosu automatically processes ports from the WSDL identified as either SOAP 1.1 or SOAP 1.2. If both are avail</a>able for any service, Gosu ignores the SOAP 1.1 ports. In some cases, the WSDL might define more than one available port (such as two SOAP 1.2 ports with different names). </div>
      <div class="B_-_Body"><a name="2047867">For example, suppose you add a WSDL file to your class hierarchy called </a><span class="cv_-_computer_voice">MyService.wsdl</span> in the package <span class="cv_-_computer_voice">example.pl.gs.wsic</span>. Gosu chooses a default port to use and creates types for the web service at the following path:</div>
      <div class="CS_-_Code_Single_Line"><span class="pc_-_parameter_in_code"><a name="2055011">ROOT_PACKAGE</a></span>.<span class="pc_-_parameter_in_code">WSDL_NAME_NORMALIZED</span>.<span class="pc_-_parameter_in_code">NORMALIZED_SERVICE_NAME</span></div>
      <div class="B_-_Body"><a name="2055058">The </a><span class="pc_-_parameter_in_code">NORMALIZED_SERVICE_NAME</span><span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt;"> </span>name of the package is the name of the service as defined by the WSDL, with capitalization and conflict resolution as necessary. For example, if there are two services in the WSDL named <span class="cv_-_computer_voice">Report</span> and <span class="cv_-_computer_voice">Echo</span>, then the API types are in the locaiton</div>
      <div class="CS_-_Code_Single_Line"><a name="2055066">example.pl.gs.wsic.myservice.Report</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2055078">example.pl.gs.wsic.myservice.Echo</a></div>
      <div class="B_-_Body"><a name="2054975">Gosu chooses a default port for each service. If there is a SOAP 1.2 version, Gosu prefers that version.</a></div>
      <div class="B_-_Body"><a name="2055103">Additionally, Gosu provides the ability to explicitly choose a port. For example, if there is a SOAP 1.1 port and a </a>SOAP 1.2 port, you could explicitly reference one of those choices. Gosu creates all the types for your web service ports within the <span class="cv_-_computer_voice">ports</span> subpackage, with types based on the name of each port in the WSDL:</div>
      <div class="CS_-_Code_Single_Line"><span class="pc_-_parameter_in_code"><a name="2054959">ROOT_PACKAGE</a></span>.<span class="pc_-_parameter_in_code">WSDL_NAME_NORMALIZED</span>.ports.<span class="pc_-_parameter_in_code">SERVICE_AND_PORT_NAME</span></div>
      <div class="B_-_Body"><a name="2047870">The </a><span class="pc_-_parameter_in_code">SERVICE_AND_PORT_NAME</span> is the service name, followed by an underscore, followed by the port name. </div>
      <div class="B_-_Body"><a name="2055159">For example, suppose the ports are called </a><span class="cv_-_computer_voice">p1</span> and <span class="cv_-_computer_voice">p2</span> and the service is called <span class="cv_-_computer_voice">Report</span>. Gosu creates types within the following packages:</div>
      <div class="CS_-_Code_Single_Line"><a name="2054986">example.pl.gs.wsic.myservice.ports.Report_p1</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2047871">example.pl.gs.wsic.myservice.ports.Report_p2</a></div>
      <div class="B_-_Body"><a name="2055180">Additionally, if the port name happens to begin with the service name, Gosu removes the duplicate service name </a>before constructing the Gosu type. For example, if the ports are called <span class="cv_-_computer_voice">ReportP1</span>, and <span class="cv_-_computer_voice">helloP2</span>, Gosu creates types within the following packages:</div>
      <div class="CS_-_Code_Single_Line"><a name="2055206">example.pl.gs.wsic.myservice.ports.Report_P1 </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// NOTE: it is not Report_ReportP1</div>
      <div class="CS_-_Code_Single_Line"><a name="2055207">example.pl.gs.wsic.myservice.ports.Report_helloP2</a>&nbsp;&nbsp;// not a duplicate, so Gosu does not remove "Hello"</div>
      <div class="B_-_Body"><a name="2055208">Each one of those hierarchies would include method names for that port for that service.</a></div>
      <div class="H2_-_Heading_2"><a name="2047856">A Real Example: Weather</a></div>
      <div class="B_-_Body"><a name="2047857">There is a public free web service that provides the weather. You can get the WSDL for this web service at the </a>URL <span class="cv_-_computer_voice">http://ws.cdyne.com/WeatherWS/Weather.asmx?wsdl</span>. This web service does not require authentication or encryption.</div>
      <div class="B_-_Body"><a name="2042835">The following Gosu code gets the weather in San Francisco:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2042836">var ws = new ws.weather.Weather()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2042837">var r = ws.GetCityWeatherByZIP(94114)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2042838">print( r.Description )</a></PRE>
      <div class="B_-_Body"><a name="2042839">Depending on the weather, your result might be something like:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2042840">Mostly Sunny</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>